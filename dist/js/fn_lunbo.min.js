!function(u){u.fn.extend({lunbo:function(d){var n,i,l=this,e=null,t=null,c=null,r=null,f=null,s=null,o={imgWidth:this.children("div").children("div").width(),num:this.children("div").children("div").length};d=u.extend({speed:500,delay:3e3,dir:1},d),n=function(){o._index=1,o.innerDiv=l.children("div"),o.btns=l.children("span"),o.innerDiv.append(o.innerDiv.children("div").first().clone()),l.hover(function(){f()},function(){c=setInterval(function(){e(1)},d.delay+d.speed)}),o.btns.on("click",function(){o.btns.index(u(this))?t():r()})},e=function(){var n=o.imgWidth,i="-="+n;if(d.dir)o._index<=3&&(o.innerDiv.css("left",0),o._index=o.num+1),o.innerDiv.animate({left:i},function(){o._index--}),s();else{if(i="+="+n,o.num+2==o._index){var e=l.offset().left,t=o.innerDiv.children("div").last().offset().left;o._index=1,o.innerDiv.css("left","-"+(t-e+12.5)+"px")}o.innerDiv.animate({left:i},function(){o._index++}),s()}},i=function(){l.children("em").each(function(){u(this).on("click",function(){var n=u(this).index()-o._index;0!=n&&(0<n?(o.innerDiv.animate({left:-(n-1)*o.imgWidth}),s()):n<0&&(o.innerDiv.animate({left:n-1*o.imgWidth}),s()))})})},s=function(){l.children("em").eq(o._index-3).addClass("show").siblings().removeClass("show")},t=function(){d.dir=1,f(),e()},r=function(){d.dir=0,f(),e()},f=function(){o.innerDiv.stop(!0,!0),clearInterval(c)},function(){n(),i(),c=setInterval(function(){e()},d.delay+d.speed)}()}})}(jQuery);