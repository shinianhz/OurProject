function item(t,e,i,n,a){this.color=t,this.name=e,this.img=i,this.price=n,this.quantity=a}var shopCart=function(c){var u=[],f={cartName:"yanxuan_shop_cart",debug:!1,decimal:2,callback:void 0};return{inited:!1,init:function(t){if(!c.navigator.cookieEnabled)return alert("您的浏览器不支持cookie无法使用购物车！,请设置允许设置cookie。"),!1;var e;if(this.inited=!0,t&&function(t,e){for(var i in e)t[i]=e[i]}(f,t),void 0===(e=m(f.cartName)))d(f.cartName,"",f.expires);else if(e=m(f.cartName))for(var i=e.split("&"),n=0,a=i.length;n<a;n++){var r=i[n].split("|"),o={};o.color=r[0]||"",o.name=r[1]||"",o.img=r[2]||"",o.price=r[3]||"",o.quantity=r[4]||"",u.push(o)}},findItem:function(t){if(!t)return u;for(var e=0,i=u.length;e<i;e++){var n=u[e];if(n.name===t)return n}},getItemIndex:function(t){for(var e=0,i=u.length;e<i;e++){if(u[e].name==t)return e}return-1},addItem:function(t){return u.push(t),i(),!0},delItem:function(t){var e=this.getItemIndex(t);if(-1<e)u.splice(e,1),i();else if(f.debug)return console.log("商品不存在"),!1},updatecart:function(t){var e=this.getItemIndex(t.name);if(-1<e){Number(u[e].quantity);Number(t.quantity),i()}else this.addItem(t)},emptyCart:function(){u.length=0,i()},checkout:function(){f.callback&&f.callback()},getTotalCount:function(t){var e=0;if(t)e=void 0===this.findItem(t)?0:this.findItem(t).quantity;else for(var i=0,n=u.length;i<n;i++)e+="NaN"===parseInt(u[i].quantity)?0:parseInt(u[i].quantity);return e},getTotalPrice:function(t){var e=0;if(t){var i=parseInt(void 0===this.findItem(t)?0:this.findItem(t).quantity),n=parseFloat(void 0===this.findItem(t)?0:this.findItem(t).price);e=(n="NaN"===n?0:n)*(i="NaN"===i?0:i)}else for(var a=0,r=u.length;a<r;a++)e+=parseFloat(u[a].price)*parseInt(u[a].quantity);return e.toFixed(f.decimal)},getCookie:m,setCookie:d};function m(t){var e=document.cookie.match(new RegExp("(^| )"+t+"=([^;]*)(;|$)"));if(null!=e)return decodeURIComponent(e[2])}function d(t,e,i){var n=(i=i||{}).expires||null,a=(i.path,i.domain||document.domain,i.secure,t+"="+encodeURIComponent(e)+(n?"; expires="+n.toGMTString():"")+"; path=/");document.cookie=a}function i(){var t=0,e=u.length;if(0<e){for(var i=[];t<e;t++){var n=u[t];i[t]=n.color+"|"+n.name+"|"+n.img+"|"+n.price+"|"+n.quantity}var a=i.join("&");d(f.cartName,a)}else d(f.cartName,"")}}("undifined"==typeof window?this:window);